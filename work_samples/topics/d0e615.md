# Preparation {#d0e615}

**Git Repo extraction on DevOps station**

Before proceeding to the installation you must clone the contents of the **Product GIT** delivery containing the deployment templates on the DEVOPS workstation :

```
git clone git@gitlab.mycom-osi.com:eaa/eaa-devops.git
git clone -b 1.4.1-release git@gitlab.mycom-osi.com:eaa/eaa-deploy.git
git clone -b 1.4.1-release git@gitlab.mycom-osi.com:eaa/eaa-ecp.git
git clone -b 6.3.1-release git@gitlab.mycom-osi.com:eaa/eaa-proptima.git
git clone -b 2.7.1-release git@gitlab.mycom-osi.com:eaa/eaa-proassure.git
git clone -b 2.7.1-release git@gitlab.mycom-osi.com:eaa/eaa-proassure-connector.git
git clone -b 12.0.1-release git@gitlab.mycom-osi.com:eaa/eaa-netexpert.git
git clone -b 2.1.6 git@gitlab.mycom-osi.com:eaa/eaa-proactor.git
```

All installation operations will now rely on the **extracted repository on the DevOps station**.

You should now have the following folder on your workstation:

-   <root\_git\_dir\>/eaa-devops
-   <root\_git\_dir\>/eaa-deploy
-   <root\_git\_dir\>/eaa-ecp
-   <root\_git\_dir\>/eaa-proptima
-   <root\_git\_dir\>/eaa-proassure
-   <root\_git\_dir\>/eaa-proassure-connector
-   <root\_git\_dir\>/eaa-netexpert
-   <root\_git\_dir\>/eaa-proactor

In these repositories you will find all Openshift related files that are commons to all environments \(templates\). You do not need to customize those files.

In these repositories you will find all Openshift related files that are commons to all environments \(templates\). You do not need to customize those files.

From now, we consider that every **command will be executed from the <root\_git\_dir\>.**

**Deployment specific git repository generation and layout**

All files that are related to a specific site deployment \(parameters files and persistent volumes\) will be managed in another git repository specific to your deployment.

This git repository will be named following this naming convention \(some scripts are supplied to help you generate this repo\):

-   <root\_git\_dir\>/eaa-deploy-site-<customer-project\>

In order to initiate your deployment specific git repo, you just have to do the following:

-   Set `export EAA_PROJECT=<customer-project>` on terminal from which want your installation \(customer=rd, namespace=eaa-staging\)
-   Ensure you get a remote repository created at [gitlab.mycom-osi.com](http://gitlab.mycom-osi.com/)
-   Execute :

```
git clone git@gitlab.mycom-osi.com:eaa/eaa-deploy-site-<customer-project>.git
```

**Parameters files**

Each Product installation will start with a step to fill specific parameters value.

Add value of the cluster sub-domain name to access applications to common site configuration , eg :

```
echo "ROUTE_SUBDOMAIN=apps.mycluster.mycom-osi.com" > <root_git_dir>/eaa-deploy-site-$EAA_PROJECT/config/site.env
```

Warning ! Do not include namespace value, it is automatically added as part of routes definitions.

****Apply dimensioning****

Based on the dimensioning document produced for your site deployment, override the default MEMORY and CPU allocations in you site dimensioning file located at .

```
<root_git_dir>/eaa-deploy-site-$EAA_PROJECT/config/dim-containers.env
```

For PrOptima PM deployment, put it in :

```
eaa-proptima-pm-dim.env
```

For PrOptima embedded into ProAssure :

```
eaa-proptima-proassure-dim.env
```

Example :

→ Extract ETL Need 40Gi memory

→ checking etl parameters :

```
> oc process -f eaa-proptima/template/tpl-eaa-proptima-mediation.yaml --parameters | grep "_RESOURCE_"
```

> ...

> DIMGR\_MEMORY\_RESOURCE\_REQUEST The minimum memory allocated to DIMgr 700Mi

> DIMGR\_CPU\_RESOURCE\_LIMIT The maximum cpu allocated to DIMgr 300m

> DIMGR\_MEMORY\_RESOURCE\_LIMIT The maximum memory allocated to DIMgr 700Mi

> EXTRACT\_CPU\_RESOURCE\_REQUEST The minimum cpu allocated to Extract 100m

> EXTRACT\_MEMORY\_RESOURCE\_REQUEST The minimum memory allocated to Extract 700Mi

> EXTRACT\_CPU\_RESOURCE\_LIMIT The maximum cpu allocated to Extract 300m

> EXTRACT\_MEMORY\_RESOURCE\_LIMIT The maximum memory allocated to Extract 700Mi

> TRANSFORM\_CPU\_RESOURCE\_REQUEST The minimum cpu allocated to Transform 200m

> TRANSFORM\_MEMORY\_RESOURCE\_REQUEST The minimum memory allocated to Transform 400Mi

> ...

→ Add overrides in site dimensioning config file :

> vi <deploy-site\>/config/dim-containers.env

> EXTRACT\_MEMORY\_RESOURCE\_REQUEST=40Gi

> EXTRACT\_MEMORY\_RESOURCE\_LIMIT=40Gi

