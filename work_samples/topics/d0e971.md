# Installing Common Platform Services {#d0e971}

**Content**

The following procedure will deploy the platform providing common services used by all software operating on the cluster :

-   ELK logging reporting
-   Authentication service
-   Monitoring

**Configuration Preparation**

Refer to [Preparing Configuration](appendix_comm.md) using following dryrun cmd:

```
./eaa-deploy/shell/deploy-platform.sh --dryrun
```

**Procedure**

Go to <root\_git\_dir\> directory in terminal and execute the following commands:

In case of a fresh/first time installation:

```
 ./eaa-deploy/shell/deploy-platform.sh
        --freshinstall
```

Install the elastic search curator with the following command:

```
./eaa-deploy/shell/deploy-cron-job.sh eaa-deploy/cron/eaa-cron-platform-curator.yaml 1.5-eaa-12
```

**Checks**

Wait for all deployments finish :

```
./eaa-deploy/shell/waitEndOfDeployment.sh
```

When finished, check status:

```
python ./eaa-deploy/shell/check-deployment-status.py
```

****Monitoring Checks & Access :****

Obtain prometheus pod name:

```
oc get pods | grep prometheus
```

Get logs:

```
oc logs <pod name>
```

Healthy logs should not exceed about 20 lines and should look like this:

```

time="2017-08-22T05:34:15Z" level=info msg="Starting prometheus (version=1.7.1, branch=master, revision=3afb3fffa3a29c3de865e1172fb740442e9d0133)" source="main.go:88"
time="2017-08-22T05:34:15Z" level=info msg="Build context (go=go1.8.3, user=root@0aa1b7fc430d, date=20170612-11:44:05)" source="main.go:89"
time="2017-08-22T05:34:15Z" level=info msg="Host details (Linux 3.10.0-514.el7.x86_64 #1 SMP Wed Oct 19 11:24:13 EDT 2016 x86_64 eaa-platform-prometheus-4-74zqq (none))" source="main.go:90"
time="2017-08-22T05:34:16Z" level=info msg="Loading configuration file /etc/prometheus/prometheus.yml" source="main.go:252"
time="2017-08-22T05:34:16Z" level=info msg="Loading series map and head chunks..." source="storage.go:428"
time="2017-08-22T05:34:18Z" level=info msg="102565 series loaded." source="storage.go:439"
time="2017-08-22T05:34:18Z" level=info msg="Starting target manager..." source="targetmanager.go:63"
time="2017-08-22T05:34:18Z" level=info msg="Listening on :9090" source="web.go:259"
time="2017-08-22T05:34:18Z" level=info msg="Using pod service account via in-cluster config" source="kubernetes.go:104"
time="2017-08-22T05:34:18Z" level=info msg="Using pod service account via in-cluster config" source="kubernetes.go:104"
```

**Access to Dashboarding UI**

Point your browser to http://grafana-$\{NAMESPACE\}.$\{ROUTE\_SUBDOMAIN\}

Use "admin/admin" as initial credentials

**Access to Prometheus UI**

Point your browser to http://prometheus-$\{NAMESPACE\}.$\{ROUTE\_SUBDOMAIN\}

