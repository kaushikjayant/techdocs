# FM Platform Installation {#d0e1583}

**Prerequisites**

-   Oracle instance must have been created, and its hostname, port and SID must have been updated in the eaa-cm config map \(see Create config map above\). The minimum mandatory parameter is: NX\_DB\_HOST

-   Administration credentials for this instance must be filled in config/eaa-nx-install.env Both parameters are mandatory: NX\_DB\_SYSUSER= NX\_DB\_SYSPASSWORD=

-   Before proceeding to the installation and upgrade you must clone the contents of the **Project GIT** repository containing the deployment and upgrade templates on the workstation:

    *git@gitlab.mycom-osi.com:eaa/eaa-deploy.git*

    *git@gitlab.mycom-osi.com:eaa/eaa-netexpert.git*

    You should now have the following folder on your workstation:

    -   <root\_git\_dir\>/eaa-deploy
    -   <root\_git\_dir\>/eaa-netexpert

**Configuration Preparation**

Refer to [Preparing Configuration](appendix_fm.md) using the following dryrun cmd:

```
 ./eaa-netexpert/shell/deploy-netexpert.sh --dryrun
```

 

***Procedure***

Go to <root\_git\_dir\> directory in terminal and execute the following commands

```
 ./eaa-netexpert/shell/deploy-netexpert.sh --proceed
```

This script will deploy all NetExpert components which includes

-   *NetExpert Platform installation*
-   *Netexpert UIs installation*
-   *Netexpert Gateway Agent \(GWA\) Installation \(for SNMP\)*
-   *Netexpert CORBA Gateway Installation*
-   *Netexpert Reporting \(Alert Manager\) Installation*
-   *DMP Server and Application Deployment*
-   *CleanDB Deployment*
-   *Netexpert TT Handler Deployment*
-   *Alert History Viewer Deployment*

 

**Checks**

Wait for all deployments finish :

```
./eaa-deploy/shell/waitEndOfDeployment.sh
```

When finished, check status:

```
python ./eaa-deploy/shell/check-deployment-status.py
```

 

 

**Note**: Refer to section CleanDB Updation to update CleanDB for an existing user.

**Updating CleanDB**

This section describes the procedure to update CleanDB on OpenShift cluster for an existing user.

**Procedure**

Update the CleanDB template as follows:

-   Run the following command:

```
oc import-image eaa-nx-nxdbadmin:<tag>
```

-   It will deploy the new pods with new image pulled in the command.
-   Go to pods

```
eaa-nx-nxdbadmin

Example: oc rsh a-nx-nxdbadmin-8-2qxjw 
```

-   Run the following script:

```
$OSI_HOME/Install/Database/[install\_cleandb.pl](http://install_cleandb.pl/) $OSI_DB_USER/$OSI_DB_PASSWORD@$ORACLE_SID
```

-   The CleanDB is updated.

## Installing CORBA Gateway and Gateway Agent Instances { .section}

Go to <root\_git\_dir\> directory in terminal and execute the following commands:

```
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --dryrun
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --proceed
```

This script will deploy:

-   *Netexpert Gateway Agent \(GWA\)*
-   *Netexpert CORBA Gateway \(CGW\) Installation*

You must additionally specify the following arguments in both `dryrun` and `proceed` mode depending on the instances that need to be configured.

|Argument|Value|Description|
|--------|-----|-----------|
|-t|DeploymentType|Specify deployment type as GWA for Netexpert Gateway Agent or CGW for Netexpert CORBA Gateway.|
|-p|GWAProtocol|Specify GWA Protocol, for example snmp, kafka, or file. The protocol name is appended to the name of the configuration file that is created for the deployment. **Note:** Ignore if DeploymentType is CGW.

|
|-s|StartOrdinal|Provide the ordinal to start deployment with. The ordinal is appended to the name of the configuration file that is created for the deployment.|
|-c|Count|Specify the number of instances to be deployed starting from StartOrdinal. Based on the value specified for this argument, a number is added to the ordinal for each deployment. For example if StartOrdinal is 500 and Count is '4,' four configuration files are created with 500, 501, 502, and 503 appended to the file names.|

**Note:** The `deploy-netexpert.sh` described above installs one instance each of GWA \(with SNMP protocol\) and CGW. Run the `deploy-nx-gwa-cgw.sh` to deploy more instances.

**GWA Example**

**Note:** If you execute the following commands:

```
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --dryrun -t GWA -p snmp -s 0 -c 3
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --proceed -t GWA -p snmp -s 0 -c 3
```

The following configuration files are created:

-   eaa-nx-gateway-agent-snmp-000
-   eaa-nx-gateway-agent-snmp-001
-   eaa-nx-gateway-agent-snmp-002

Similarly, when you execute the above scripts by replacing `-p snmp` with `-p kafka`, the following configuration files are created:

-   eaa-nx-gateway-agent-kafka-000
-   eaa-nx-gateway-agent-kafka-001
-   eaa-nx-gateway-agent-kafka-002

**CGW Example**

**Note:** If you execute the following commands:

```
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --dryrun -t CGW -s 0 -c 3
./eaa-netexpert/shell/deploy-nx-gwa-cgw.sh --proceed -t CGW -s 0 -c 3
```

The following configuration files are created:

-   eaa-nx-corba-gateway-000
-   eaa-nx-corba-gateway-001
-   eaa-nx-corba-gateway-002

